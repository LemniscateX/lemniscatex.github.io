<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"lemniscatex.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ç¬¬åå…­ç« ï¼ŒHTML5è„šæœ¬ç¼–ç¨‹ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScriptå­¦ä¹ ç¬”è®°(16)">
<meta property="og:url" content="https://lemniscatex.github.io/js-note-16/index.html">
<meta property="og:site_name" content="å’±æ˜¯å°ç¾Š">
<meta property="og:description" content="ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ç¬¬åå…­ç« ï¼ŒHTML5è„šæœ¬ç¼–ç¨‹ã€‚">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-01-20T23:42:31.000Z">
<meta property="article:modified_time" content="2021-01-21T16:36:44.000Z">
<meta property="article:tag" content="HTML5">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://lemniscatex.github.io/js-note-16/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>JavaScriptå­¦ä¹ ç¬”è®°(16) | å’±æ˜¯å°ç¾Š</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">å’±æ˜¯å°ç¾Š</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-projects">

    <a href="/projects/" rel="section"><i class="fa fa-magic fa-fw"></i>Projects</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://lemniscatex.github.io/js-note-16/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar/avatar.jpg">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å’±æ˜¯å°ç¾Š">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          JavaScriptå­¦ä¹ ç¬”è®°(16)
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-21 07:42:31" itemprop="dateCreated datePublished" datetime="2021-01-21T07:42:31+08:00">2021-01-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-22 00:36:44" itemprop="dateModified" datetime="2021-01-22T00:36:44+08:00">2021-01-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ç¬¬åå…­ç« ï¼ŒHTML5è„šæœ¬ç¼–ç¨‹ã€‚</p>
<span id="more"></span>

<hr>
<p>ä¹‹å‰è®²è¿‡ï¼ŒHTML5å®šä¹‰äº†å¾ˆå¤šæ–°æ ‡ç­¾ï¼ŒåŒæ—¶ä¹Ÿå®šä¹‰äº†å¾ˆå¤šæ–¹ä¾¿çš„JavaScript APIã€‚è¿™ä¸€ç« å·®ä¸å¤šå°±æ˜¯ä»‹ç»ä¸‹ï¼šä½¿ç”¨è·¨æ–‡æ¡£æ¶ˆæ¯ä¼ é€’ã€æ‹–æ”¾APIã€éŸ³é¢‘ä¸è§†é¢‘ã€‚</p>
<h2 id="è·¨æ–‡æ¡£æ¶ˆæ¯ä¼ é€’"><a href="#è·¨æ–‡æ¡£æ¶ˆæ¯ä¼ é€’" class="headerlink" title="è·¨æ–‡æ¡£æ¶ˆæ¯ä¼ é€’"></a>è·¨æ–‡æ¡£æ¶ˆæ¯ä¼ é€’</h2><p>å³<code>cross-document messaging</code>/<code>XDM</code>ï¼Œæ˜¯ä¸€ç§è®©ä¸åŒåŸŸçš„é¡µé¢ä¹‹é—´ä¼ é€’æ¶ˆæ¯çš„æœºåˆ¶ï¼Œè­¬å¦‚<code>www.worx.com</code>åŸŸä¸­çš„é¡µé¢ä¸ä½äºä¸€ä¸ªå†…åµŒæ¡†æ¶ä¸­çš„<code>p2p.wrox.com</code>åŸŸä¸­çš„é¡µé¢é€šä¿¡ã€‚åœ¨XDMè¯ç”Ÿä¹‹å‰ï¼Œè¦ç¨³å¦¥åœ°å®ç°è¿™ç§é€šä¿¡æ¯”è¾ƒéº»çƒ¦ï¼ŒXDMåˆ™è®©æˆ‘ä»¬å¯ä»¥ç¨³å¦¥è€Œç®€å•åœ°å®ç°ã€‚</p>
<p>åˆ©ç”¨XDMçš„<code>postMessage()</code>ï¼Œå¯ä»¥å‘å¦ä¸€ä¸ªåœ°æ–¹ä¼ é€’æ•°æ®(ä¸€èˆ¬æŒ‡åŒ…å«åœ¨å½“å‰é¡µé¢çš„<code>&lt;iframe&gt;</code>å…ƒç´ æˆ–è€…ç”±å½“å‰é¡µé¢å¼¹å‡ºçš„çª—å£)ï¼Œå®ƒæ¥æ”¶2ä¸ªå‚æ•°ï¼šæ¶ˆæ¯å†…å®¹ã€è¡¨ç¤ºæ¶ˆæ¯æ¥æ”¶æ–¹æ‰€åœ¨åŸŸçš„å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨ï¼šæ‰€æœ‰æ”¯æŒXDMçš„æµè§ˆå™¨ä¹Ÿæ”¯æŒiframeçš„contentWindowå±æ€§</span></span><br><span class="line"><span class="keyword">const</span> iframeWindow = <span class="built_in">document</span>.getElementById(<span class="string">&quot;myframe&quot;</span>).contentWindow;</span><br><span class="line">iframeWindow.postMessage(<span class="string">&quot;A secret&quot;</span>, <span class="string">&quot;http://www.wrox.com&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°è¯•å‘å†…åµŒæ¡†æ¶ä¸­å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œå¹¶æŒ‡å®šæ¡†æ¶ä¸­çš„æ–‡æ¡£å¿…é¡»æ¥æºäº<code>http.www.wrox.com</code>åŸŸã€‚å¦‚æœæ¥æºåŒ¹é…ï¼Œæ¶ˆæ¯ä¼šä¼ é€’åˆ°å†…åµŒæ¡†æ¶ä¸­ï¼Œå¦åˆ™ä»€ä¹ˆä¹Ÿä¸åšï¼Œä½¿ç”¨<code>&quot;*&quot;</code>åˆ™è¡¨ç¤ºå¯ä»¥æŠŠå†…å®¹å‘é€ç»™æ¥è‡ªä»»ä½•åŸŸçš„æ–‡æ¡£ï¼Œä½†ä¸æ¨èè¿™æ ·åšã€‚</p>
<p>è‡³äºæ¥æ”¶æ•°æ®ï¼Œåˆ™æ˜¯ä¼šè§¦å‘<code>window</code>å¯¹è±¡çš„<code>message</code>äº‹ä»¶ï¼Œæ­¤äº‹ä»¶ä¸ºå¼‚æ­¥äº‹ä»¶ï¼Œç›¸åº”çš„äº‹ä»¶å¯¹è±¡<code>event</code>åŒ…å«3æ–¹é¢ä¿¡æ¯ï¼š</p>
<ul>
<li><code>data</code>ï¼š<code>postMessage()</code>ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥çš„å­—ç¬¦ä¸²</li>
<li><code>origin</code>ï¼šå‘é€æ¶ˆæ¯æ–‡æ¡£æ‰€åœ¨çš„åŸŸï¼Œå¦‚<code>&quot;http://www.wrox.com&quot;</code></li>
<li><code>source</code>ï¼šå‘é€æ¶ˆæ¯æ–‡æ¡£çš„<code>window</code>å¯¹è±¡çš„ä»£ç†(è€Œé<code>window</code>å¯¹è±¡)ï¼Œè¿™ä¸ªä»£ç†å¯¹è±¡ä¸»è¦ç”¨äºåœ¨å‘é€ä¸Šä¸€æ¡æ¶ˆæ¯çš„çª—å£ä¸­è°ƒç”¨<code>postMessage()</code>æ–¹æ³•ï¼Œå¦‚æœå‘é€æ¶ˆæ¯çš„çª—å£æ¥è‡ªåŒä¸€ä¸ªåŸŸï¼Œé‚£è¿™ä¸ªå¯¹è±¡å°±æ˜¯<code>window</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="built_in">window</span>, <span class="string">&quot;message&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç¡®ä¿å‘é€æ¶ˆæ¯çš„åŸŸæ˜¯å·²çŸ¥çš„åŸŸ</span></span><br><span class="line">  <span class="keyword">if</span>(event.origin == <span class="string">&quot;http://www.wrox.com&quot;</span>) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç†æ¥æ”¶åˆ°çš„ä¿¡æ¯</span></span><br><span class="line">    processMessage(event.data);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯é€‰ï¼šå‘æ¥æºçª—å£å‘é€å›æ‰§</span></span><br><span class="line">    event.source.postMessage(<span class="string">&quot;recieved&quot;</span>, <span class="string">&quot;http://p2p.wrox.com&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="åŸç”Ÿæ‹–æ”¾"><a href="#åŸç”Ÿæ‹–æ”¾" class="headerlink" title="åŸç”Ÿæ‹–æ”¾"></a>åŸç”Ÿæ‹–æ”¾</h2><p>æœ€æ—©å¼•å…¥æ‹–æ”¾çš„æ˜¯IE4ï¼Œå½“æ—¶åªèƒ½æ‹–æ”¾å›¾åƒå’ŒæŸäº›æ–‡æœ¬ï¼Œæ”¾ç½®çš„ä½ç½®ä¹Ÿåªèƒ½æ˜¯æ–‡æœ¬æ¡†ï¼Œåæ¥åŠŸèƒ½é€æ¸æ‰©å±•ï¼Œç›´åˆ°HTML5ä»¥IEçš„å®ä¾‹ä¸ºåŸºç¡€ï¼Œåˆ¶å®šäº†æ‹–æ”¾è§„èŒƒã€‚</p>
<h3 id="æ‹–æ”¾äº‹ä»¶"><a href="#æ‹–æ”¾äº‹ä»¶" class="headerlink" title="æ‹–æ”¾äº‹ä»¶"></a>æ‹–æ”¾äº‹ä»¶</h3><p>æ‹–åŠ¨å…ƒç´ çš„æ—¶å€™ä¼šä¾æ¬¡è§¦å‘ä¸‹åˆ—äº‹ä»¶ï¼Œè¿™ä¸‰ä¸ªäº‹ä»¶çš„ç›®æ ‡éƒ½æ˜¯è¢«æ‹–åŠ¨çš„å…ƒç´ ï¼š</p>
<ul>
<li><code>dragstart</code><br>æŒ‰ä¸‹é¼ æ ‡é”®å¹¶å¼€å§‹ç§»åŠ¨é¼ æ ‡æ—¶è§¦å‘ã€‚æ­¤æ—¶è¢«æ‹–åŠ¨çš„å…ƒç´ ä¼šæœ‰ä¸€ä¸ªåŠé€æ˜çš„å‰¯æœ¬è·Ÿéšç€é¼ æ ‡ï¼Œé¼ æ ‡åˆ™ä¼šå˜æˆé»‘è‰²çš„ç¦æ­¢ç¬¦å·(åƒè¿™ä¸ªğŸš«)ï¼Œè¡¨ç¤ºä¸èƒ½æŠŠå…ƒç´ æ”¾åˆ°è‡ªå·±ä¸Šé¢ã€‚</li>
<li><code>drag</code><br>è§¦å‘<code>dragstart</code>äº‹ä»¶åéšå³è§¦å‘ï¼Œä¸”ä¼šåœ¨æ‹–åŠ¨å…ƒç´ æœŸé—´æŒç»­è§¦å‘(ç±»ä¼¼<code>mousemove</code>äº‹ä»¶åœ¨é¼ æ ‡ç§»åŠ¨çš„å…¨è¿‡ç¨‹æŒç»­å‘ç”Ÿ)ã€‚</li>
<li><code>dragend</code><br>æ‹–åŠ¨åœæ­¢æ—¶è§¦å‘ï¼Œæ— è®ºå…ƒç´ æ˜¯å¦è¢«æ”¾åˆ°äº†æœ‰æ•ˆçš„æ”¾ç½®ç›®æ ‡ä¸Šã€‚</li>
</ul>
<p>å½“å…ƒç´ è¢«æ‹–åŠ¨åˆ°ä¸€ä¸ªæœ‰æ•ˆçš„æ”¾ç½®ç›®æ ‡ä¸Šæ—¶ä¼šä¾æ¬¡è§¦å‘ä¸‹åˆ—äº‹ä»¶ï¼Œè¿™å››ä¸ªäº‹ä»¶çš„ç›®æ ‡éƒ½æ˜¯ä½œä¸ºæ”¾ç½®ç›®æ ‡çš„å…ƒç´ ï¼š</p>
<ul>
<li><code>dragenter</code><br>æœ‰å…ƒç´ è¢«æ‹–åŠ¨åˆ°æ”¾ç½®ç›®æ ‡ä¸Šæ—¶è§¦å‘(ç±»ä¼¼<code>mouseover</code>äº‹ä»¶)ã€‚</li>
<li><code>dragover</code><br>è§¦å‘<code>dragenter</code>äº‹ä»¶åéšå³è§¦å‘ï¼Œä¸”ä¼šåœ¨è¢«æ‹–åŠ¨å…ƒç´ åœ¨æ”¾ç½®ç›®æ ‡çš„èŒƒå›´å†…ç§»åŠ¨æ—¶æŒç»­è§¦å‘ã€‚</li>
<li><code>dragleave</code>æˆ–<code>drop</code><br>å…ƒç´ è¢«æ‹–å‡ºäº†æ”¾ç½®ç›®æ ‡æ—¶è§¦å‘<code>dragleave</code>(ç±»ä¼¼<code>mouseout</code>äº‹ä»¶)ï¼Œå…ƒç´ è¢«æ”¾åˆ°äº†æ”¾ç½®ç›®æ ‡ä¸­æ—¶è§¦å‘<code>drop</code>ã€‚</li>
</ul>
<h3 id="dataTransferå¯¹è±¡"><a href="#dataTransferå¯¹è±¡" class="headerlink" title="dataTransferå¯¹è±¡"></a>dataTransferå¯¹è±¡</h3><h4 id="æ•°æ®ä¼ è¾“"><a href="#æ•°æ®ä¼ è¾“" class="headerlink" title="æ•°æ®ä¼ è¾“"></a>æ•°æ®ä¼ è¾“</h4><p>åªæœ‰ç®€å•çš„æ‹–æ”¾è€Œæ²¡æœ‰æ•°æ®å˜åŒ–æ˜¯æ²¡ä»€ä¹ˆç”¨çš„ï¼Œä¸ºäº†åœ¨æ‹–æ”¾æ“ä½œæ—¶å®ç°æ•°æ®äº¤æ¢ï¼ŒIE5å¼•å…¥äº†<code>dataTransfer</code>å¯¹è±¡ï¼Œå®ƒæ˜¯äº‹ä»¶å¯¹è±¡çš„ä¸€ä¸ªå±æ€§(æ‰€ä»¥åªèƒ½åœ¨æ‹–æ”¾äº‹ä»¶çš„handleré‡Œè®¿é—®)ã€‚æ­¤å¯¹è±¡æœ‰2ä¸ªä¸»è¦æ–¹æ³•ï¼š<code>getData()</code>ã€<code>setData()</code>ï¼Œä¸¾ä¾‹å¦‚ä¸‹ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®å’Œæ¥æ”¶æ–‡æœ¬æ•°æ®</span></span><br><span class="line">event.dataTransfer.setData(<span class="string">&quot;text&quot;</span>, <span class="string">&quot;some text&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> text = event.dataTransfer.getData(<span class="string">&quot;text&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®å’Œæ¥æ”¶URL</span></span><br><span class="line">event.dataTransfer.setData(<span class="string">&quot;URL&quot;</span>, <span class="string">&quot;http://www.wrox.com&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> url = event.dataTransfer.getData(<span class="string">&quot;URL&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>IEåªå®šä¹‰äº†<code>&quot;text&quot;</code>å’Œ<code>&quot;URL&quot;</code>ï¼›HTML5åˆ™æ‰©å±•æˆäº†å…è®¸æŒ‡å®šå„ç§MIMEç±»å‹ï¼Œä¸è¿‡ä¹Ÿè€ƒè™‘åˆ°äº†å‘åå…¼å®¹ï¼Œ<code>&quot;text&quot;</code>å’Œ<code>&quot;URL&quot;</code>ä¾æ—§å¯ç”¨ï¼Œåªæ˜¯è¢«æ˜ å°„æˆäº†<code>&quot;text/plain&quot;</code>å’Œ<code>&quot;text/uri-list&quot;</code>ã€‚å®é™…ä¸Šï¼Œ<code>dataTransfer</code>å¯¹è±¡å¯ä»¥ä¸ºæ¯ç§MIMEç±»å‹éƒ½ä¿å­˜ä¸€ä¸ªå€¼ï¼Œè­¬å¦‚è¿™ä¸ªå¯¹è±¡é‡Œå¯ä»¥åŒæ—¶ä¿å­˜ä¸€æ®µæ–‡æœ¬å’Œä¸€ä¸ªURLã€‚</p>
<p>å¯¹äº<code>dataTransfer</code>ï¼Œæµè§ˆå™¨é»˜è®¤çš„è¡Œä¸ºæ˜¯ï¼Œåœ¨æ‹–åŠ¨æ–‡æœ¬/é“¾æ¥/å›¾åƒæ—¶æµè§ˆå™¨è°ƒç”¨<code>&quot;text&quot;</code>/<code>&quot;URL&quot;</code>å½¢å¼çš„<code>setData()</code>ä¿å­˜æ•°æ®åˆ°å…¶ä¸­ã€‚å½“ç„¶äº†ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ä¸€ä¸‹é»˜è®¤è¡Œä¸ºï¼Œæ‰‹å·¥ä¿å­˜è‡ªå·±è¦ä¼ è¾“çš„æ•°æ®ä»¥ä¾¿å°†æ¥ä½¿ç”¨ã€‚</p>
<h4 id="æ”¾ç½®è¡Œä¸º"><a href="#æ”¾ç½®è¡Œä¸º" class="headerlink" title="æ”¾ç½®è¡Œä¸º"></a>æ”¾ç½®è¡Œä¸º</h4><p>è¿˜å¯ä»¥é€šè¿‡<code>dataTransfer</code>å¯¹è±¡æ¥ç¡®å®šè¢«æ‹–åŠ¨çš„å…ƒç´ å’Œæ”¾ç½®ç›®æ ‡å…ƒç´ èƒ½å¤Ÿæ¥æ”¶ä»€ä¹ˆæ“ä½œï¼Œä¸ºæ­¤éœ€è¦è®¿é—®å®ƒçš„2ä¸ªå±æ€§ï¼š</p>
<ul>
<li><code>dropEffect</code><br>è¢«æ‹–åŠ¨å…ƒç´ èƒ½å¤Ÿæ‰§è¡Œçš„æ”¾ç½®è¡Œä¸ºï¼Œæœ‰ä¸‹é¢4ç§å–å€¼ã€‚å¯¹äºæ¯ä¸€ç§å–å€¼ï¼Œæµè§ˆå™¨åªä¼šæ”¹å˜å…‰æ ‡çš„æ˜¾ç¤ºç¬¦å·ï¼Œè€Œæ— å®é™…è¡Œä¸ºã€‚è¦ä½¿ç”¨æ­¤å±æ€§å¿…é¡»åœ¨<code>ondragenter</code>æ—¶ï¼Œé’ˆå¯¹æ”¾ç½®ç›®æ ‡æ¥ä½¿ç”¨ã€‚<ul>
<li><code>&quot;none&quot;</code>ï¼šä¸èƒ½æŠŠæ‹–åŠ¨çš„å…ƒç´ æ”¾åœ¨è¿™é‡Œï¼Œè¿™æ˜¯é™¤æ–‡æœ¬æ¡†å¤–æ‰€æœ‰å…ƒç´ çš„é»˜è®¤å€¼</li>
<li><code>&quot;move&quot;</code>ï¼šåº”è¯¥æŠŠæ‹–åŠ¨çš„å…ƒç´ ç§»åŠ¨åˆ°æ”¾ç½®ç›®æ ‡</li>
<li><code>&quot;copy&quot;</code>ï¼šåº”è¯¥æŠŠæ‹–åŠ¨çš„å…ƒç´ å¤åˆ¶åˆ°æ”¾ç½®ç›®æ ‡</li>
<li><code>&quot;link&quot;</code>ï¼šæ”¾ç½®ç›®æ ‡ä¼šæ‰“å¼€æ‹–åŠ¨çš„å…ƒç´ (ä½†æ‹–åŠ¨çš„å¿…é¡»æ˜¯URL)</li>
</ul>
</li>
<li><code>effectAllowed</code><br>è¡¨ç¤ºå…è®¸æ‹–åŠ¨å…ƒç´ çš„å“ªç§<code>dropEffect</code>ï¼Œæœ‰ä¸‹é¢8ç§å–å€¼ã€‚è¦ä½¿ç”¨æ­¤å±æ€§å¿…é¡»åœ¨<code>ondragstart</code>æ—¶è®¾ç½®ã€‚<ul>
<li><code>uninitialized</code>ï¼šæ²¡æœ‰ç»™è¢«æ‹–åŠ¨å…ƒç´ è®¾ç½®ä»»ä½•æ”¾ç½®è¡Œä¸º</li>
<li><code>none</code>ï¼šè¢«æ‹–åŠ¨å…ƒç´ ä¸èƒ½æœ‰ä»»ä½•è¡Œä¸º</li>
<li><code>all</code>ï¼šå…è®¸ä»»æ„dropEffect</li>
<li><code>copy</code>ï¼šåªå…è®¸å€¼ä¸º<code>&quot;copy&quot;</code>çš„dropEffect</li>
<li><code>link</code>ï¼šåªå…è®¸å€¼ä¸º<code>&quot;link&quot;</code>çš„dropEffect</li>
<li><code>move</code>ï¼šåªå…è®¸å€¼ä¸º<code>&quot;move&quot;</code>çš„dropEffect</li>
<li><code>copyLink</code>ï¼šåªå…è®¸å€¼ä¸º<code>&quot;copy&quot;</code>å’Œ<code>&quot;link&quot;</code>çš„dropEffect</li>
<li><code>copyMove</code>ï¼šåªå…è®¸å€¼ä¸º<code>&quot;copy&quot;</code>å’Œ<code>&quot;move&quot;</code>çš„dropEffect</li>
<li><code>linkMove</code>ï¼šåªå…è®¸å€¼ä¸º<code>&quot;link&quot;</code>å’Œ<code>&quot;move&quot;</code>çš„dropEffect</li>
</ul>
</li>
</ul>
<p>ä¸¾ä¸ªä¾‹å­è§£é‡Šä¸€ä¸‹ã€‚å¦‚æœæƒ³å…è®¸ç”¨æˆ·æŠŠæ–‡æœ¬æ¡†çš„æ–‡æœ¬æ‹–æ”¾åˆ°ä¸€ä¸ª<code>&lt;div&gt;</code>ä¸­ï¼Œé¦–å…ˆè¦å°†<code>dropEffect</code>å’Œ<code>effectAllowed</code>è®¾ç½®ä¸º<code>&quot;move&quot;</code>ã€‚å…¶æ¬¡ï¼Œç”±äº<code>&lt;div&gt;</code>å…ƒç´ æ”¾ç½®äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºæ˜¯ä»€ä¹ˆä¹Ÿä¸åšï¼Œæ–‡æœ¬å¹¶ä¸ä¼šè‡ªå·±ç§»åŠ¨ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å†™ä»£ç å°†æ–‡æœ¬æ’å…¥åˆ°<code>&lt;div&gt;</code>ä¸­ï¼Œå³å¯ã€‚å¦‚æœæˆ‘ä»¬æŠŠ<code>dropEffect</code>å’Œ<code>effectAllowed</code>è®¾ç½®ä¸º<code>&quot;copy&quot;</code>ï¼Œé‚£å°±å¯ä»¥åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šï¼Œä¸ç§»èµ°åŸå§‹çš„æ–‡æœ¬æ¡†ä¸­çš„æ–‡æœ¬(å› ä¸ºæ˜¯<code>copy</code>å˜›ï¼)ã€‚</p>
<h4 id="å…¶å®ƒæˆå‘˜"><a href="#å…¶å®ƒæˆå‘˜" class="headerlink" title="å…¶å®ƒæˆå‘˜"></a>å…¶å®ƒæˆå‘˜</h4><p><code>dataTransfer</code>è¿˜æœ‰ä¸€äº›æ–¹æ³•å’Œå±æ€§ã€‚</p>
<ul>
<li><code>addElement(element)</code><br>ä¸ºæ‹–åŠ¨æ“ä½œæ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚æ·»åŠ è¿™ä¸ªå…ƒç´ åªå½±å“æ•°æ®(å³å¢åŠ ä½œä¸ºæ‹–åŠ¨æºè€Œå“åº”å›è°ƒçš„å¯¹è±¡)ï¼Œä¸ä¼šå½±å“æ‹–åŠ¨æ“ä½œæ—¶é¡µé¢å…ƒç´ çš„å¤–è§‚ã€‚</li>
<li><code>clearData(format)</code><br>æ¸…é™¤ä»¥ç‰¹å®šæ ¼å¼ä¿å­˜çš„æ•°æ®ã€‚</li>
<li><code>setDragImage(element, x, y)</code><br>æŒ‡å®šä¸€å¹…å›¾åƒï¼Œç”¨äºåœ¨æ‹–åŠ¨å‘ç”Ÿæ—¶ï¼Œæ˜¾ç¤ºåœ¨å…‰æ ‡ä¸‹æ–¹ã€‚è¿™é‡Œçš„3ä¸ªå‚æ•°åˆ†åˆ«ä¸ºï¼šè¦æ˜¾ç¤ºçš„HTMLå…ƒç´ (å¯ä»¥æ˜¯å›¾åƒï¼›ä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒå…ƒç´ ï¼Œæ­¤æ—¶æ˜¾ç¤ºæ¸²æŸ“åçš„å…ƒç´ )ã€å…‰æ ‡åœ¨å›¾åƒä¸­çš„<code>x</code>å’Œ<code>y</code>åæ ‡ã€‚</li>
<li><code>types</code><br>å½“å‰ä¿å­˜çš„æ•°æ®ç±»å‹ï¼Œä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„é›†åˆï¼Œä»¥<code>&quot;text&quot;</code>è¿™æ ·çš„å­—ç¬¦ä¸²ä¿å­˜æ•°æ®ç±»å‹ã€‚</li>
</ul>
<h3 id="è‡ªå®šä¹‰æ”¾ç½®ç›®æ ‡"><a href="#è‡ªå®šä¹‰æ”¾ç½®ç›®æ ‡" class="headerlink" title="è‡ªå®šä¹‰æ”¾ç½®ç›®æ ‡"></a>è‡ªå®šä¹‰æ”¾ç½®ç›®æ ‡</h3><p>æµè§ˆå™¨ä¼šé»˜è®¤æœ‰äº›å…ƒç´ æ˜¯å¯æ”¾ç½®ç›®æ ‡ï¼Œæœ‰äº›ä¸æ˜¯ï¼Œå‰è€…é¼ æ ‡ä¼šå˜æˆè™šçº¿çŸ©å½¢å’Œä¸€ä¸ªåŠ å·ï¼Œåè€…é¼ æ ‡ä¼šå˜æˆç¦æ­¢ç¬¦å·ã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥æŠŠä»»ä½•å…ƒç´ å˜æˆæœ‰æ•ˆçš„æ”¾ç½®ç›®æ ‡ï¼Œåªè¦é‡å†™<code>dragenter</code>å’Œ<code>dragover</code>äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºå³å¯ã€‚ä¸‹é¢ä¾‹å­ä¸­å±•ç¤ºäº†å¦‚ä½•æŠŠä¸€ä¸ª<code>&lt;div&gt;</code>å˜æˆæ”¾ç½®ç›®æ ‡ï¼Œè¿™æ ·å½“æŠŠå…ƒç´ æ‹–åŠ¨åˆ°å…¶ä¸Šæ—¶ï¼Œé¼ æ ‡ä¸ºè™šçº¿çŸ©å½¢å’Œä¸€ä¸ªåŠ å·ï¼Œé‡Šæ”¾é¼ æ ‡æ—¶ä¹Ÿä¼šè§¦å‘<code>drop</code>äº‹ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> droptarget = <span class="built_in">document</span>.getElementById(<span class="string">&quot;droptarget&quot;</span>);</span><br><span class="line">droptarget.addEventHandler(<span class="string">&quot;dragover&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  event.preventDefault();</span><br><span class="line">&#125;);</span><br><span class="line">droptarget.addEventHandler(<span class="string">&quot;dragenter&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  event.preventDefault();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Firefoxä¸­ï¼Œ<code>drop</code>äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºæ˜¯æ‰“å¼€è¢«æ”¾ç½®çš„å…ƒç´ çš„URLï¼Œæ¯”å¦‚æ‹–æ”¾ä¸€ä¸ªå›¾ç‰‡ï¼Œé‚£é¡µé¢å°±ä¼šè½¬å‘å›¾åƒæ–‡ä»¶ï¼›æ‹–æ”¾ä¸€æ®µæ–‡æœ¬ï¼Œåˆ™ä¼šå¯¼è‡´æ— æ•ˆURLé”™è¯¯ã€‚å› æ­¤ä¸ºäº†è®©Firefoxæ”¯æŒæ­£å¸¸çš„æ‹–æ”¾ï¼Œè¿˜è¦å–æ¶ˆ<code>drop</code>äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">droptarget.addEventHandler(<span class="string">&quot;drop&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  event.preventDefault();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="è‡ªå®šä¹‰æ‹–åŠ¨å…ƒç´ "><a href="#è‡ªå®šä¹‰æ‹–åŠ¨å…ƒç´ " class="headerlink" title="è‡ªå®šä¹‰æ‹–åŠ¨å…ƒç´ "></a>è‡ªå®šä¹‰æ‹–åŠ¨å…ƒç´ </h3><p>é»˜è®¤å›¾åƒã€é“¾æ¥ã€æ–‡æœ¬å¯æ‹–åŠ¨ï¼Œä¸è¿‡å¯ä»¥è‡ªå·±ç”¨<code>draggable</code>å±æ€§æ¥å°†ä¸å¯æ‹–åŠ¨å…ƒç´ è®¾ç½®ä¸ºå¯æ‹–åŠ¨çš„ï¼Œä¹Ÿå¯ä»¥å°†åŸæœ¬å¯æ‹–åŠ¨çš„å…ƒç´ è®¾ç½®ä¸ºä¸å¯æ‹–åŠ¨çš„ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è®©æ­¤å›¾åƒä¸å¯æ‹–åŠ¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;smile.gif&quot;</span> <span class="attr">draggable</span>=<span class="string">&quot;false&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;smile face&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è®©æ­¤å…ƒç´ å¯æ‹–åŠ¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">draggable</span>=<span class="string">&quot;true&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="åª’ä½“å…ƒç´ "><a href="#åª’ä½“å…ƒç´ " class="headerlink" title="åª’ä½“å…ƒç´ "></a>åª’ä½“å…ƒç´ </h2><p>åœ¨ä»¥å‰ï¼Œå¯Œåª’ä½“å†…å®¹ä¸ºäº†ä¿è¯è·¨æµè§ˆå™¨å…¼å®¹æ€§ï¼Œéœ€è¦é€‰æ‹©flashï¼Œç°åœ¨HTML5æ–°å¢äº†<code>&lt;audio&gt;</code>å’Œ<code>&lt;video&gt;</code>ï¼Œè®©å¼€å‘äººå‘˜ä¸å¿…ä¾èµ–ä»»ä½•æ’ä»¶å°±èƒ½åœ¨ç½‘é¡µä¸­åµŒå…¥è·¨æµè§ˆå™¨çš„éŸ³é¢‘å’Œè§†é¢‘ã€‚åŸºæœ¬ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">&quot;conference.mpg&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myVideo&quot;</span>&gt;</span>Video player not available<span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;song.mp3&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myAudio&quot;</span>&gt;</span>Audio player not available<span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å› ä¸ºå¹¶éæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒæ‰€æœ‰åª’ä½“æ ¼å¼ï¼Œæ‰€ä»¥å¯ä»¥æŒ‡å®šå¤šä¸ªä¸åŒçš„åª’ä½“æ¥æºã€‚ä¸ºæ­¤ï¼Œä¸åœ¨æ ‡ç­¾ä¸­ç”¨<code>src</code>å±æ€§ï¼Œè€Œæ˜¯ç”¨ä¸€ä¸ªæˆ–å¤šä¸ª<code>&lt;source&gt;</code>å…ƒç´ ï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">&quot;myVideo&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;conference.webm&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/webm; codecs=&#x27;vp8, vorbis&#x27;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;conference.ogv&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/ogg; codecs=&#x27;theora, vorbis&#x27;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;conference.mpg&quot;</span>&gt;</span></span><br><span class="line">  Video player not available</span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">id</span>=<span class="string">&quot;myAudio&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;song.ogg&quot;</span> <span class="attr">type</span>=<span class="string">&quot;audio/ogg&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;song.mp3&quot;</span> <span class="attr">type</span>=<span class="string">&quot;audio/mpeg&quot;</span>&gt;</span></span><br><span class="line">  Audio player not available</span><br><span class="line"><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h3><p>åˆ—ä¸¾å®ƒä¿©å…±æœ‰çš„å±æ€§ã€‚</p>
<p>ä¸€äº›æ˜¾ç¤ºå±æ€§ï¼š</p>
<ul>
<li><code>videoWidth</code>ï¼šè¡¨ç¤ºè§†é¢‘(ä¸ä¸€å®šæ˜¯å…ƒç´ )å®½åº¦çš„æ•´æ•°ï¼Œåªé€‚ç”¨äº<code>&lt;video&gt;</code></li>
<li><code>videoHeight</code>ï¼šè¡¨ç¤ºè§†é¢‘(ä¸ä¸€å®šæ˜¯å…ƒç´ )é«˜åº¦çš„æ•´æ•°ï¼Œåªé€‚ç”¨äº<code>&lt;video&gt;</code></li>
<li><code>src</code>ï¼šè¡¨ç¤ºåª’ä½“æ–‡ä»¶æ¥æºçš„å­—ç¬¦ä¸²ï¼Œä»»ä½•æ—¶å€™éƒ½å¯é‡å†™</li>
<li><code>currentSrc</code>ï¼šè¡¨ç¤ºåª’ä½“æ–‡ä»¶URLçš„å­—ç¬¦ä¸²</li>
<li><code>totalBytes</code>ï¼šè¡¨ç¤ºå½“å‰èµ„æºæ‰€éœ€æ€»å­—èŠ‚æ•°çš„æ•´æ•°</li>
<li><code>controls</code>ï¼šæ˜¯å¦æ˜¾ç¤ºæµè§ˆå™¨å†…ç½®æ§ä»¶</li>
</ul>
<p>ä¸€äº›æ’­æ”¾å±æ€§ï¼š</p>
<ul>
<li><code>autoplay</code>ï¼šæ˜¯å¦è‡ªåŠ¨æ’­æ”¾</li>
<li><code>loop</code>ï¼šæ˜¯å¦åœ¨æ’­æ”¾å®Œæˆåä»å¤´å¼€å§‹æ’­æ”¾</li>
<li><code>paused</code>ï¼šæ’­æ”¾å™¨æ˜¯å¦æš‚åœ</li>
<li><code>ended</code>ï¼šæ˜¯å¦æ’­æ”¾å®Œæˆ</li>
<li><code>muted</code>ï¼šæ˜¯å¦é™éŸ³</li>
<li><code>volume</code>ï¼šè¡¨ç¤ºéŸ³é‡çš„æµ®ç‚¹æ•°ï¼Œå€¼ä¸º<code>0.0</code>åˆ°<code>1.0</code></li>
<li><code>defaultPlaybackRate</code>ï¼šè¡¨ç¤ºé»˜è®¤æ’­æ”¾é€Ÿåº¦çš„æµ®ç‚¹æ•°ï¼Œé»˜è®¤å€¼ä¸º<code>1.0</code>ç§’</li>
<li><code>playbackRate</code>ï¼šè¡¨ç¤ºå½“å‰çš„æ’­æ”¾é€Ÿåº¦çš„æµ®ç‚¹æ•°ï¼Œç”¨æˆ·å¯ä»¥æ”¹å˜æ­¤å€¼æ¥è®©åª’ä½“æ’­æ”¾é€Ÿåº¦å˜å¿«æˆ–å˜æ…¢(<code>defaultPlaybackRate</code>åªèƒ½ç”±å¼€å‘äººå‘˜ä¿®æ”¹)</li>
<li><code>start</code>ï¼šè¡¨ç¤ºå¼€å§‹æ’­æ”¾ä½ç½®çš„æµ®ç‚¹æ•°ï¼Œä»¥ç§’è¡¨ç¤º</li>
<li><code>bufferingThrottled</code>ï¼šæµè§ˆå™¨æ˜¯å¦å¯¹ç¼“å†²è¿›è¡Œäº†èŠ‚æµ</li>
<li><code>seekable</code>ï¼šå¯ä»¥æœç´¢çš„æ—¶é—´èŒƒå›´</li>
<li><code>seeking</code>ï¼šæ’­æ”¾å™¨æ˜¯å¦æ­£ç§»åŠ¨åˆ°åª’ä½“æ–‡ä»¶ä¸­çš„æ–°ä½ç½®</li>
</ul>
<p>ä¸€äº›å‡†å¤‡çŠ¶æ€ï¼š</p>
<ul>
<li><code>networkState</code>ï¼šè¡¨ç¤ºç½‘ç»œè¿æ¥çŠ¶æ€çš„æ•´æ•°(<code>0</code>è¡¨ç¤ºç©ºã€<code>1</code>è¡¨ç¤ºæ­£åŠ è½½ã€<code>2</code>è¡¨ç¤ºæ­£åŠ è½½å…ƒæ•°æ®ã€<code>3</code>è¡¨ç¤ºå·²åŠ è½½ç¬¬ä¸€å¸§ã€<code>4</code>è¡¨ç¤ºåŠ è½½å®Œæˆ)</li>
<li><code>readyState</code>ï¼šè¡¨ç¤ºåª’ä½“æ˜¯å¦å·²ç»å°±ç»ªçš„æ•´æ•°(<code>0</code>è¡¨ç¤ºæ•°æ®ä¸å¯ç”¨ã€<code>1</code>è¡¨ç¤ºå¯ä»¥æ˜¾ç¤ºå½“å‰å¸§ã€<code>2</code>è¡¨ç¤ºå¯ä»¥å¼€å§‹æ’­æ”¾ã€<code>3</code>è¡¨ç¤ºå¯ä»¥ä»å¤´åˆ°å°¾æ’­æ”¾)</li>
</ul>
<p>ä¸€äº›ç»Ÿè®¡æ•°æ®ï¼š</p>
<ul>
<li><code>played</code>ï¼šè¡¨ç¤ºå·²æ’­æ”¾çš„æ—¶é—´èŒƒå›´</li>
<li><code>currentTime</code>ï¼šè¡¨ç¤ºå·²æ’­æ”¾ç§’æ•°çš„æµ®ç‚¹æ•°</li>
<li><code>duration</code>ï¼šè¡¨ç¤ºåª’ä½“çš„æ€»æ’­æ”¾æ—¶é—´(ç§’æ•°)çš„æµ®ç‚¹æ•°</li>
<li><code>currentLoop</code>ï¼šè¡¨ç¤ºåª’ä½“æ–‡ä»¶å·²å¾ªç¯æ¬¡æ•°çš„æ•´æ•°</li>
<li><code>buffered</code>ï¼šè¡¨ç¤ºå·²ä¸‹è½½çš„ç¼“å†²çš„æ—¶é—´èŒƒå›´</li>
<li><code>bufferedBytes</code>ï¼šè¡¨ç¤ºå·²ä¸‹è½½çš„ç¼“å†²çš„å­—èŠ‚èŒƒå›´</li>
<li><code>bufferingRate</code>ï¼šä¸‹è½½è¿‡ç¨‹ä¸­å¹³å‡æ¯ç§’æ¥æ”¶åˆ°çš„ä½æ•°</li>
</ul>
<h3 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h3><p>åˆ—ä¸¾å…±æœ‰çš„äº‹ä»¶ã€‚</p>
<p>å’ŒåŠ è½½ç›¸å…³ï¼š</p>
<ul>
<li><code>dataunavailable</code>ï¼šå› ä¸ºæ²¡æœ‰æ•°æ®è€Œä¸èƒ½æ’­æ”¾ï¼Œ<code>readyState</code>ä¸º<code>0</code></li>
<li><code>canshowcurrentframe</code>ï¼šå½“å‰å¸§å·²ä¸‹è½½å®Œï¼Œ<code>readyState</code>ä¸º<code>1</code></li>
<li><code>canplay</code>ï¼šå¯ä»¥æ’­æ”¾ï¼Œ<code>readyState</code>ä¸º<code>2</code></li>
<li><code>canplaythrough</code>ï¼šæ’­æ”¾å¯ç»§ç»­ä¸”ä¸ä¼šä¸­æ–­ï¼Œ<code>readyState</code>ä¸º<code>3</code></li>
<li><code>loadstart</code>ï¼šä¸‹è½½å·²å¼€å§‹</li>
<li><code>loadedmetadata</code>ï¼šåª’ä½“å…ƒæ•°æ®å·²åŠ è½½å®Œæˆ</li>
<li><code>loadeddata</code>ï¼šåª’ä½“ç¬¬ä¸€å¸§å·²åŠ è½½å®Œæˆ</li>
<li><code>load</code>ï¼šå·²åŠ è½½å®Œæˆ(å¯èƒ½è¢«åºŸå¼ƒï¼Œå»ºè®®ç”¨<code>canplaythrough</code>)</li>
<li><code>progress</code>ï¼šæ­£åœ¨ä¸‹è½½</li>
<li><code>stalled</code>ï¼šæµè§ˆå™¨å°è¯•ä¸‹è½½ï¼Œä½†æœªæ¥æ”¶åˆ°æ•°æ®</li>
</ul>
<p>å’Œæ’­æ”¾ç›¸å…³ï¼š</p>
<ul>
<li><code>play</code>ï¼šåª’ä½“å·²æ¥æ”¶åˆ°æŒ‡ä»¤å¼€å§‹æ’­æ”¾</li>
<li><code>playing</code>ï¼šåª’ä½“å·²å®é™…å¼€å§‹æ’­æ”¾</li>
<li><code>pause</code>ï¼šæ’­æ”¾å·²æš‚åœ</li>
<li><code>waiting</code>ï¼šæ’­æ”¾æš‚åœï¼Œç­‰å¾…ä¸‹è½½æ›´å¤šæ•°æ®</li>
<li><code>ended</code>ï¼šå·²æ’­æ”¾å®Œæˆå¹¶åœæ­¢</li>
<li><code>seeked</code>ï¼šæœç´¢ç»“æŸ</li>
<li><code>seeking</code>ï¼šæ­£ç§»åŠ¨åˆ°æ–°ä½ç½®</li>
<li><code>timeupdate</code>ï¼š<code>currentTime</code>è¢«ä»¥ä¸åˆç†æˆ–æ„å¤–çš„æ–¹å¼æ›´æ–°</li>
<li><code>durationchange</code>ï¼š<code>duration</code>å±æ€§æ”¹å˜</li>
<li><code>volumechange</code>ï¼š<code>volume</code>æˆ–<code>muted</code>æ”¹å˜</li>
<li><code>ratechange</code>ï¼šæ’­æ”¾é€Ÿåº¦æ”¹å˜</li>
</ul>
<p>å’Œå‡ºé”™ç›¸å…³ï¼š</p>
<ul>
<li><code>abort</code>ï¼šä¸‹è½½ä¸­æ–­</li>
<li><code>empty</code>ï¼šå‘ç”Ÿé”™è¯¯é˜»æ­¢äº†åª’ä½“ä¸‹è½½</li>
<li><code>emptied</code>ï¼šç½‘ç»œè¿æ¥å…³é—­</li>
<li><code>error</code>ï¼šä¸‹è½½æœŸé—´å‘ç”Ÿç½‘ç»œé”™è¯¯</li>
</ul>
<h3 id="è‡ªå®šä¹‰åª’ä½“æ’­æ”¾å™¨"><a href="#è‡ªå®šä¹‰åª’ä½“æ’­æ”¾å™¨" class="headerlink" title="è‡ªå®šä¹‰åª’ä½“æ’­æ”¾å™¨"></a>è‡ªå®šä¹‰åª’ä½“æ’­æ”¾å™¨</h3><p>ä½¿ç”¨<code>play()</code>å’Œ<code>pause()</code>æ–¹æ³•å¯ä»¥æ‰‹å·¥æ§åˆ¶åª’ä½“æ–‡ä»¶çš„æ’­æ”¾ã€‚ç»„åˆä½¿ç”¨å±æ€§ã€æ–¹æ³•ã€äº‹ä»¶å¯ä»¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„åª’ä½“æ’­æ”¾å™¨ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mediaplayer&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;video&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">&quot;player&quot;</span> <span class="attr">src</span>=<span class="string">&quot;movie.mov&quot;</span> <span class="attr">poster</span>=<span class="string">&quot;mymovie.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">height</span>=<span class="string">&quot;200&quot;</span>&gt;</span></span><br><span class="line">      Video player not available</span><br><span class="line">    <span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;controls&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Play&quot;</span> <span class="attr">id</span>=<span class="string">&quot;video-btn&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;curtime&quot;</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span> / <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;duration&quot;</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> player = <span class="built_in">document</span>.getElementById(<span class="string">&quot;player&quot;</span>),</span><br><span class="line">      btn = <span class="built_in">document</span>.getElementById(<span class="string">&quot;video-btn&quot;</span>),</span><br><span class="line">      curtime = <span class="built_in">document</span>.getElementById(<span class="string">&quot;curtime&quot;</span>),</span><br><span class="line">      duration = <span class="built_in">document</span>.getElementById(<span class="string">&quot;duration&quot;</span>),</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°æ’­æ”¾æ—¶é—´</span></span><br><span class="line">duration.innerHTML = player.duration;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºæŒ‰é’®æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åº</span></span><br><span class="line">btn.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(player.paused) &#123;</span><br><span class="line">    player.play();</span><br><span class="line">    btn.value = <span class="string">&quot;Pause&quot;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    player.pause();</span><br><span class="line">    btn.value = <span class="string">&quot;Play&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šæ—¶æ›´æ–°å½“å‰æ—¶é—´</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  curtime.innerHTML = player.currentTime;</span><br><span class="line">&#125;, <span class="number">250</span>);</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶å•¦ï¼Œè¿™åªæ˜¯ä¸ªç®€å•çš„ä¾‹å­ï¼</p>
<h3 id="æ£€æµ‹æ ¼å¼æ”¯æŒæƒ…å†µ"><a href="#æ£€æµ‹æ ¼å¼æ”¯æŒæƒ…å†µ" class="headerlink" title="æ£€æµ‹æ ¼å¼æ”¯æŒæƒ…å†µ"></a>æ£€æµ‹æ ¼å¼æ”¯æŒæƒ…å†µ</h3><p>æ–¹æ³•<code>canPlayType()</code>æ¥å—ä¸€ç§æ ¼å¼/ç¼–è§£ç å™¨å­—ç¬¦ä¸²ï¼Œè¿”å›<code>&quot;probably&quot;</code>ã€<code>&quot;maybe&quot;</code>æˆ–<code>&quot;&quot;</code>ï¼Œæ¥æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒæŸç§æ ¼å¼å’Œç¼–è§£ç å™¨ï¼Œå¯èƒ½æ€§ä¾æ¬¡é™ä½ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åªä¼ å…¥MIMEç±»å‹ï¼Œå¤§æ¦‚ç‡è¿”å›&quot;maybe&quot;</span></span><br><span class="line"><span class="comment">// å› ä¸ºåª’ä½“æ–‡ä»¶æœ¬èº«åªä¸è¿‡æ˜¯éŸ³é¢‘æˆ–è§†é¢‘çš„ä¸€ä¸ªå®¹å™¨ï¼ŒçœŸæ­£å†³å®šæ–‡ä»¶èƒ½å¦æ’­æ”¾çš„è¿˜æ˜¯ç¼–ç çš„æ ¼å¼</span></span><br><span class="line"><span class="keyword">if</span>(audio.canPlayType(<span class="string">&quot;audio/mpeg&quot;</span>)) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼ å…¥MIMEç±»å‹å’Œè§£ç å™¨ï¼Œå¤§æ¦‚ç‡è¿”å›&quot;probably&quot;</span></span><br><span class="line"><span class="comment">// å› ä¸ºæ ¼å¼æ›´åŠ ç¡®å®šäº†ï¼Œå¯èƒ½æ€§ä¼šå¢åŠ </span></span><br><span class="line"><span class="keyword">if</span>(audio.canPlayType(<span class="string">&quot;audio/ogg; codecs=\&quot;vorbis\&quot;&quot;</span>)) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Audioç±»å‹"><a href="#Audioç±»å‹" class="headerlink" title="Audioç±»å‹"></a>Audioç±»å‹</h3><p><code>&lt;audio&gt;</code>æœ‰ä¸€ä¸ªåŸç”Ÿçš„JavaScriptæ„é€ å‡½æ•°<code>Audio()</code>(ç±»æ¯”çš„è¯å°±æ˜¯<code>&lt;img&gt;</code>å’Œ<code>Image()</code>ï¼Œä¸è¿‡ä¸åŒä¹‹å¤„åœ¨äºAudioä¸ç”¨åƒImageé‚£æ ·å¿…é¡»æ’å…¥åˆ°æ–‡æ¡£ä¸­)ï¼Œå¯ä»¥åœ¨ä»»ä½•æ—¶å€™æ’­æ”¾éŸ³é¢‘ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> audio = <span class="keyword">new</span> Audio(<span class="string">&quot;sound.mp3&quot;</span>); <span class="comment">// åˆ›å»ºå³å¯å¼€å§‹ä¸‹è½½</span></span><br><span class="line">audio.addEventHandler(<span class="string">&quot;canplaythrough&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  audio.play();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="å†å²çŠ¶æ€ç®¡ç†"><a href="#å†å²çŠ¶æ€ç®¡ç†" class="headerlink" title="å†å²çŠ¶æ€ç®¡ç†"></a>å†å²çŠ¶æ€ç®¡ç†</h2><p>å› ä¸ºç”¨æˆ·çš„æ“ä½œä¸ä¸€å®šä¼šæ‰“å¼€æ–°é¡µé¢ï¼Œæ‰€ä»¥â€œå‰è¿›â€â€œåé€€â€å°±å¤±å»äº†ä½œç”¨ï¼Œå¯¼è‡´ç”¨æˆ·å¾ˆéš¾åœ¨ä¸åŒçŠ¶æ€é—´åˆ‡æ¢ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„é¦–é€‰æ–¹æ³•æ˜¯<code>hashchange</code>äº‹ä»¶(ç¬¬13ç« è®¨è®ºè¿‡)ï¼Œå®ƒå¯ä»¥ç›´åˆ°URLçš„å‚æ•°å˜åŒ–ï¼Œä¸ä¹‹åŒ¹é…çš„æ˜¯<code>history</code>å¯¹è±¡ã€‚é€šè¿‡è¿™ä¿©ï¼Œèƒ½å¤Ÿåœ¨ä¸åŠ è½½æ–°é¡µé¢çš„æƒ…å†µä¸‹æ”¹å˜æµè§ˆå™¨çš„URLã€‚</p>
<ul>
<li>pushState</li>
</ul>
<p><code>history.pushState()</code>å¯ä»¥å°†æ–°çš„çŠ¶æ€ä¿¡æ¯åŠ å…¥å†å²çŠ¶æ€æ ˆï¼Œæµè§ˆå™¨åœ°å€æ ä¹Ÿä¼šå˜æˆæ–°çš„ç›¸å¯¹URLã€‚ä¸è¿‡æµè§ˆå™¨å¹¶ä¸ä¼šçœŸçš„å‘æœåŠ¡å™¨å‘é€è¯·æ±‚(ä¹Ÿå°±ç›¸å½“äºåˆ›é€ äº†å‡URLï¼ŒæœåŠ¡å™¨ä¸­æ²¡æœ‰å®é™…çš„URLä¸ä¹‹å¯¹åº”ï¼Œè¿™æ—¶åˆ·æ–°ä¼š404)ï¼Œå³ä½¿çŠ¶æ€æ”¹å˜åæŸ¥è¯¢<code>location.href</code>ä¹Ÿä¼šè¿”å›ä¸åœ°å€æ ä¸­ç›¸åŒçš„åœ°å€ã€‚å®ƒæ¥æ”¶3ä¸ªå‚æ•°ï¼šçŠ¶æ€å¯¹è±¡ã€æ–°çŠ¶æ€çš„æ ‡é¢˜ã€å¯é€‰çš„ç›¸å¯¹URLã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">history.pushState(&#123;<span class="attr">name</span>: <span class="string">&quot;Nicholas&quot;</span>&#125;, <span class="string">&quot;Nicholas page&quot;</span>, <span class="string">&quot;nicholas.html&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>popstate</li>
</ul>
<p>å› ä¸º<code>pushState()</code>ä¼šåˆ›å»ºæ–°çš„å†å²çŠ¶æ€ï¼Œæ‰€ä»¥â€œåé€€â€æŒ‰é’®å¯ä»¥ä½¿ç”¨äº†ã€‚ç‚¹å‡»â€œåé€€â€åï¼Œä¼šè§¦å‘<code>window</code>å¯¹è±¡çš„<code>popstate</code>äº‹ä»¶ã€‚è¿™ä¸ªäº‹ä»¶çš„<code>state</code>å±æ€§å°±åŒ…å«ç€<code>pushState()</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&quot;popstate&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> state = event.state;</span><br><span class="line">  <span class="keyword">if</span>(state) &#123; <span class="comment">// ç¬¬ä¸€ä¸ªé¡µé¢åŠ è½½æ—¶stateä¸ºç©º</span></span><br><span class="line">    processState(state);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å¾—åˆ°è¿™ä¸ªçŠ¶æ€å¯¹è±¡åï¼Œå¿…é¡»æŠŠé¡µé¢é‡ç½®ä¸ºè¿™ä¸ªçŠ¶æ€å¯¹è±¡ä¸­çš„æ•°æ®è¡¨ç¤ºçš„çŠ¶æ€(å› ä¸ºæµè§ˆå™¨ä¸ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬åšè¿™äº›)ã€‚ä¸”æµè§ˆå™¨åŠ è½½çš„ç¬¬ä¸€ä¸ªé¡µé¢æ²¡æœ‰çŠ¶æ€ï¼Œå› æ­¤å•å‡»â€œåé€€â€æŒ‰é’®è¿”å›æµè§ˆå™¨åŠ è½½çš„ç¬¬ä¸€ä¸ªé¡µé¢æ—¶ï¼Œ<code>event.state</code>å€¼ä¸º<code>null</code>ã€‚</p>
<ul>
<li>replaceState</li>
</ul>
<p>ç”¨æ¥æ›´æ–°å½“å‰çŠ¶æ€ï¼Œä¼ å…¥çš„å‚æ•°ä¸<code>pushState()</code>çš„å‰ä¸¤ä¸ªå‚æ•°ç›¸åŒã€‚æ­¤æ–¹æ³•ä¸ä¼šåœ¨å†å²çŠ¶æ€æ ˆä¸­åˆ›å»ºæ–°çŠ¶æ€ï¼Œåªä¼šé‡å†™å½“å‰çŠ¶æ€ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">history.replaceState(&#123;<span class="attr">name</span>: <span class="string">&quot;Greg&quot;</span>&#125;, <span class="string">&quot;Greg&#x27;s page&quot;</span>);</span><br></pre></td></tr></table></figure>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/HTML5/" rel="tag"># HTML5</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/js-note-15/" rel="prev" title="JavaScriptå­¦ä¹ ç¬”è®°(15)">
      <i class="fa fa-chevron-left"></i> JavaScriptå­¦ä¹ ç¬”è®°(15)
    </a></div>
      <div class="post-nav-item">
    <a href="/js-note-17/" rel="next" title="JavaScriptå­¦ä¹ ç¬”è®°(17)">
      JavaScriptå­¦ä¹ ç¬”è®°(17) <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%A8%E6%96%87%E6%A1%A3%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92"><span class="nav-number">1.</span> <span class="nav-text">è·¨æ–‡æ¡£æ¶ˆæ¯ä¼ é€’</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8E%9F%E7%94%9F%E6%8B%96%E6%94%BE"><span class="nav-number">2.</span> <span class="nav-text">åŸç”Ÿæ‹–æ”¾</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8B%96%E6%94%BE%E4%BA%8B%E4%BB%B6"><span class="nav-number">2.1.</span> <span class="nav-text">æ‹–æ”¾äº‹ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dataTransfer%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.2.</span> <span class="nav-text">dataTransferå¯¹è±¡</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93"><span class="nav-number">2.2.1.</span> <span class="nav-text">æ•°æ®ä¼ è¾“</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%94%BE%E7%BD%AE%E8%A1%8C%E4%B8%BA"><span class="nav-number">2.2.2.</span> <span class="nav-text">æ”¾ç½®è¡Œä¸º</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B6%E5%AE%83%E6%88%90%E5%91%98"><span class="nav-number">2.2.3.</span> <span class="nav-text">å…¶å®ƒæˆå‘˜</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%94%BE%E7%BD%AE%E7%9B%AE%E6%A0%87"><span class="nav-number">2.3.</span> <span class="nav-text">è‡ªå®šä¹‰æ”¾ç½®ç›®æ ‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%96%E5%8A%A8%E5%85%83%E7%B4%A0"><span class="nav-number">2.4.</span> <span class="nav-text">è‡ªå®šä¹‰æ‹–åŠ¨å…ƒç´ </span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AA%92%E4%BD%93%E5%85%83%E7%B4%A0"><span class="nav-number">3.</span> <span class="nav-text">åª’ä½“å…ƒç´ </span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%9E%E6%80%A7"><span class="nav-number">3.1.</span> <span class="nav-text">å±æ€§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6"><span class="nav-number">3.2.</span> <span class="nav-text">äº‹ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AA%92%E4%BD%93%E6%92%AD%E6%94%BE%E5%99%A8"><span class="nav-number">3.3.</span> <span class="nav-text">è‡ªå®šä¹‰åª’ä½“æ’­æ”¾å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A3%80%E6%B5%8B%E6%A0%BC%E5%BC%8F%E6%94%AF%E6%8C%81%E6%83%85%E5%86%B5"><span class="nav-number">3.4.</span> <span class="nav-text">æ£€æµ‹æ ¼å¼æ”¯æŒæƒ…å†µ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Audio%E7%B1%BB%E5%9E%8B"><span class="nav-number">3.5.</span> <span class="nav-text">Audioç±»å‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8E%86%E5%8F%B2%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="nav-number">4.</span> <span class="nav-text">å†å²çŠ¶æ€ç®¡ç†</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt=""
      src="/images/avatar/avatar.jpg">
  <p class="site-author-name" itemprop="name"></p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">50</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2019 â€“ 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-rocket"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LemniscateX</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
